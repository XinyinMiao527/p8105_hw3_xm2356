---
title: "p8105_hw3_xm2356"
author: "Xinyin Miao (xm2356)"
date: "2025-10-06"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  warning = FALSE,
  message = FALSE,
  fig.width = 8,
  fig.height = 6 )
```

```{r}
library(tidyverse)
```

# Problem 1
```{r}
library(p8105.datasets)
data("instacart")
```

The instacart dataset is a large dataframe containing `r nrow(instacart)` observations and `r ncol(instacart)` variables. Each observation represents a single item within a customer's order. Key variables include:

order_id: A unique identifier for each order.
product_id: A unique identifier for each product.
product_name: The name of the product.
aisle_id and aisle: The aisle number and name where the product is located.
department: The department name.
order_dow: The day of the week the order was placed.
order_hour_of_day: The hour of the day the order was placed.

```{r}
instacart |> 
  summarize(
    total_obs = n(),
    unique_users = n_distinct(user_id),
    unique_orders = n_distinct(order_id),
    unique_aisles = n_distinct(aisle)
  )

```

Take the contents of order ID `r instacart$order_id[1]` as an example. This customer ordered 8 items, including 'Bulgarian Yogurt', which is from the 'yogurt' aisle and 'dairy eggs' department. Within these 8 items, 'Bulgarian Yogurt','Organic 4% Milk Fat Whole Milk Cottage Cheese','Lightly Smoked Sardines in Olive Oil', 'Organic Whole String Cheese' have been ordered by this user in the past. And the order was placed on Friday at 10 a.m.There are 9 days since the last order.

## How many aisles are there, and which aisles are the most items ordered from?

```{r}

unique_aisles = instacart |> 
  summarize(unique_aisles = n_distinct(aisle))

aisle_counts = instacart |> 
  count(aisle, sort = TRUE)

unique_aisles
head(aisle_counts)

```

## The plot shows the number of items ordered in each aisle.
```{r}
aisle_counts |> 
  filter(n > 10000) |> 
  mutate(aisle = fct_reorder(aisle, n)) |> 
  ggplot(aes(x = aisle, y = n)) +
  geom_col() +
  coord_flip() +
  labs(title = "Aisles with >10,000 Orders",
       x = "Aisle", y = "Number of Orders")

```








